{"ast":null,"code":"import _objectWithoutProperties from \"/home/ouspg/Documents/testing/blogFronted/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"/home/ouspg/Documents/testing/blogFronted/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/ouspg/Documents/testing/blogFronted/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/ouspg/Documents/testing/blogFronted/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/ouspg/Documents/testing/blogFronted/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ouspg/Documents/testing/blogFronted/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport blogService from './services/blogs';\nimport ShowBlogs from './components/showBlogs';\nimport loginService from './services/login';\nimport Notification from './components/notification';\nimport BlogForm from './components/blogForm';\nimport { useField } from './hooks/index';\n\nvar App = function App() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      blogs = _useState2[0],\n      setBlogs = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      title = _useState6[0],\n      setTitle = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      author = _useState8[0],\n      setAuthor = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      url = _useState10[0],\n      setUrl = _useState10[1];\n\n  var _useState11 = useState({\n    message: null,\n    type: null\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      notif = _useState12[0],\n      setNotif = _useState12[1];\n\n  var username = useField({\n    type: 'text',\n    name: 'username'\n  });\n  var password = useField({\n    type: 'password',\n    name: 'password'\n  });\n  useEffect(function () {\n    blogService.getAll().then(function (blogs) {\n      return setBlogs(blogs);\n    });\n  }, []);\n  useEffect(function () {\n    var loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser');\n\n    if (loggedUserJSON) {\n      var _user = JSON.parse(loggedUserJSON);\n\n      setUser(_user);\n      blogService.setToken(_user.token);\n    }\n  });\n\n  var addBlog =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var likes, blog, response, notifState, _notifState;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              likes = null;\n              blog = {\n                title: title,\n                author: author,\n                url: url,\n                likes: likes\n              };\n              _context.prev = 2;\n              _context.next = 5;\n              return blogService.create(blog);\n\n            case 5:\n              response = _context.sent;\n              console.log(response);\n              notifState = {\n                message: \"Post was succesful\",\n                type: \"success\"\n              };\n              setNotif(notifState);\n              setTimeout(function () {\n                setNotif(_objectSpread({}, notif, {\n                  message: null\n                }));\n              }, 5000);\n              _context.next = 17;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](2);\n              _notifState = {\n                message: \"Post failed\",\n                type: \"error\"\n              };\n              setNotif(_notifState);\n              setTimeout(function () {\n                setNotif(_objectSpread({}, notif, {\n                  message: null\n                }));\n              }, 5000);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[2, 12]]);\n    }));\n\n    return function addBlog() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleLogin =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(event) {\n      var _user2, notifState, _notifState2;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              event.preventDefault();\n              _context2.prev = 1;\n              _context2.next = 4;\n              return loginService.login({\n                username: username.value,\n                password: password.value\n              });\n\n            case 4:\n              _user2 = _context2.sent;\n              window.localStorage.setItem('loggedBlogAppUser', JSON.stringify(_user2));\n              blogService.setToken(_user2.token);\n              setUser(_user2);\n              username.reset();\n              password.reset();\n              notifState = {\n                message: \"Logging in was succesful\",\n                type: 'success'\n              };\n              setNotif(notifState);\n              setTimeout(function () {\n                setNotif(_objectSpread({}, notif, {\n                  message: null\n                }));\n              }, 5000);\n              _context2.next = 20;\n              break;\n\n            case 15:\n              _context2.prev = 15;\n              _context2.t0 = _context2[\"catch\"](1);\n              _notifState2 = {\n                message: \"Wrong username or password\",\n                type: 'error'\n              };\n              setNotif(_notifState2);\n              setTimeout(function () {\n                setNotif(_objectSpread({}, notif, {\n                  message: null\n                }));\n              }, 5000);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this, [[1, 15]]);\n    }));\n\n    return function handleLogin(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleTitleChange = function handleTitleChange(event) {\n    setTitle(event.target.value);\n  };\n\n  var handleAuthorChange = function handleAuthorChange(event) {\n    setAuthor(event.target.value);\n    console.log(blogs.likes);\n  };\n\n  var handleUrlChange = function handleUrlChange(event) {\n    setUrl(event.target.value);\n  };\n\n  var likeHandler =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(event) {\n      var likedBlog, newList, notifState, _notifState3;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              event.preventDefault();\n              likedBlog = blogs.find(function (blog) {\n                return blog.id === event.target.value;\n              });\n              likedBlog.likes++;\n              _context3.prev = 3;\n              _context3.next = 6;\n              return blogService.update(likedBlog.id, likedBlog);\n\n            case 6:\n              _context3.next = 8;\n              return blogService.getAll();\n\n            case 8:\n              newList = _context3.sent;\n              setBlogs(newList);\n              notifState = {\n                message: \"You liked \".concat(likedBlog.title),\n                type: \"success\"\n              };\n              setNotif(notifState);\n              setTimeout(function () {\n                setNotif(_objectSpread({}, notif, {\n                  message: null\n                }));\n              }, 5000);\n              _context3.next = 20;\n              break;\n\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](3);\n              _notifState3 = {\n                message: 'Like failed',\n                type: 'error'\n              };\n              setNotif(_notifState3);\n              setTimeout(function () {\n                setNotif(_objectSpread({}, notif, {\n                  message: null\n                }));\n              }, 5000);\n\n            case 20:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this, [[3, 15]]);\n    }));\n\n    return function likeHandler(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var removeHandler =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4(event) {\n      var removedBlog, newList;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              event.preventDefault();\n              console.log(event.target.value);\n              removedBlog = blogs.find(function (blog) {\n                return blog.id === event.target.value;\n              });\n              console.log(removedBlog);\n\n              if (!window.confirm(\"delete BLOG?\")) {\n                _context4.next = 17;\n                break;\n              }\n\n              _context4.prev = 5;\n              _context4.next = 8;\n              return blogService.remove(removedBlog.id);\n\n            case 8:\n              _context4.next = 10;\n              return blogService.getAll();\n\n            case 10:\n              newList = _context4.sent;\n              setBlogs(newList);\n              _context4.next = 17;\n              break;\n\n            case 14:\n              _context4.prev = 14;\n              _context4.t0 = _context4[\"catch\"](5);\n              console.log('failed');\n\n            case 17:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this, [[5, 14]]);\n    }));\n\n    return function removeHandler(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  /* eslint-disable */\n\n\n  var usernameForm, passwordForm;\n  reset = username.reset;\n  usernameForm = _objectWithoutProperties(username, [\"reset\"]);\n  reset = password.reset;\n  passwordForm = _objectWithoutProperties(password, [\"reset\"]);\n\n  /* eslint-enable*/\n  if (user === null) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Login\"), React.createElement(Notification, {\n      notif: notif,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Username: \", React.createElement(\"input\", Object.assign({}, username, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    })), \"Password: \", React.createElement(\"input\", Object.assign({}, password, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Kirjaudu\")));\n  } else {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"BLOG-APP\"), React.createElement(Notification, {\n      notif: notif,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), React.createElement(ShowBlogs, {\n      blogs: blogs,\n      username: user.username,\n      likeHandler: likeHandler,\n      removeHandler: removeHandler,\n      user: user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), React.createElement(BlogForm, {\n      addBlog: addBlog,\n      handleAuthorChange: handleAuthorChange,\n      handleTitleChange: handleTitleChange,\n      handleUrlChange: handleUrlChange,\n      title: title,\n      author: author,\n      url: url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }));\n  }\n};\n\nexport default App;","map":{"version":3,"sources":["/home/ouspg/Documents/testing/blogFronted/src/App.js"],"names":["React","useState","useEffect","blogService","ShowBlogs","loginService","Notification","BlogForm","useField","App","blogs","setBlogs","user","setUser","title","setTitle","author","setAuthor","url","setUrl","message","type","notif","setNotif","username","name","password","getAll","then","loggedUserJSON","window","localStorage","getItem","JSON","parse","setToken","token","addBlog","likes","blog","create","response","console","log","notifState","setTimeout","handleLogin","event","preventDefault","login","value","setItem","stringify","reset","handleTitleChange","target","handleAuthorChange","handleUrlChange","likeHandler","likedBlog","find","id","update","newList","removeHandler","removedBlog","confirm","remove","usernameForm","passwordForm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport blogService from './services/blogs'\nimport ShowBlogs from './components/showBlogs'\nimport loginService from './services/login'\nimport Notification from './components/notification'\nimport BlogForm from './components/blogForm'\nimport {useField} from  './hooks/index'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [user, setUser] = useState(null)\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n  const [notif, setNotif] = useState({\n    message: null,\n    type:null,\n  })\n  const username = useField({type: 'text', name:'username'})\n  const password = useField({type: 'password', name: 'password'})\n \n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser')\n    if(loggedUserJSON){\n      let user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n  })\n  const addBlog = async () => {\n    let likes = null\n    let blog = {\n      title:title,\n      author: author,\n      url:url,\n      likes:likes\n    }\n    try{\n    let response = await blogService.create(blog)\n    console.log(response)\n    let notifState = {\n      message: \"Post was succesful\",\n      type:\"success\"\n    }\n    setNotif(notifState)\n    setTimeout(() => {\n      setNotif({...notif, message:null})\n    }, 5000)\n\n    }catch (exception){\n      let notifState = {\n        message: \"Post failed\",\n        type:\"error\"\n      }\n      setNotif(notifState)\n      setTimeout(() => {\n        setNotif({...notif, message:null})\n      }, 5000)\n  \n    }\n  }\n\n\n  const handleLogin = async (event) =>{\n    event.preventDefault()\n    try{\n      let user = await loginService.login({\n        username:username.value,\n        password:password.value\n      })\n      window.localStorage.setItem(\n        'loggedBlogAppUser', JSON.stringify(user)\n      )\n      blogService.setToken(user.token)\n      setUser(user)\n      username.reset()\n      password.reset()\n      let notifState ={\n        message: `Logging in was succesful`,\n        type:'success'\n      }\n      setNotif(notifState)\n      setTimeout(() => {\n        setNotif({...notif, message:null})\n      }, 5000)\n\n\n    }catch (exception){\n      let notifState = {\n        message:\"Wrong username or password\",\n        type:'error'\n      }\n      setNotif(notifState)\n      setTimeout(()=>{\n        setNotif({...notif,message:null})\n      }, 5000)\n\n    }\n\n  }\n\n\n  const handleTitleChange = (event) => {\n    setTitle(event.target.value)\n  }\n\n  const handleAuthorChange = (event) => {\n    setAuthor(event.target.value)\n    console.log(blogs.likes)\n  }\n\n  const handleUrlChange = (event) => {\n    setUrl(event.target.value)\n    \n\n  }\n  const likeHandler = async (event) => {\n    event.preventDefault()\n    let likedBlog = blogs.find(blog => blog.id === event.target.value)\n    likedBlog.likes++\n    try{\n      await blogService.update(likedBlog.id, likedBlog)\n      let newList = await blogService.getAll()\n      setBlogs(newList)\n      let notifState = {\n        message: `You liked ${likedBlog.title}`,\n        type: \"success\"\n      }\n      setNotif(notifState)\n      setTimeout(() => {\n        setNotif({...notif, message:null})\n      }, 5000)\n    }catch(exception){\n      let notifState = {\n        message: 'Like failed',\n        type:'error'\n      }\n      setNotif(notifState)\n      setTimeout(() => {\n        setNotif({...notif, message:null})\n      },5000)\n    }\n  }\n  const removeHandler = async(event) => {\n    event.preventDefault()\n    console.log(event.target.value)\n    let removedBlog = blogs.find(blog => blog.id === event.target.value)\n    console.log(removedBlog)\n    if(window.confirm(\"delete BLOG?\")){\n\n      try{\n        await blogService.remove(removedBlog.id)\n        let newList = await blogService.getAll()\n        setBlogs(newList)\n      }catch{\n        console.log('failed')\n      }\n    }\n    \n  }\n  /* eslint-disable */\n  let usernameForm, passwordForm\n\n  ({reset, ...usernameForm} = username);\n  ({reset, ...passwordForm} = password)\n  /* eslint-enable*/\n\n  if (user === null){\n    return(\n      \n        <div>\n          <h1>Login</h1>\n          <Notification notif={notif}/>\n          <form onSubmit = {handleLogin}>\n              Username: <input {...username}/>\n              Password: <input {...password}/>\n              <button type=\"submit\">Kirjaudu</button>\n      </form>\n      </div>\n    )\n  }else{\n\n  return (\n    <div>\n      <h2>BLOG-APP</h2>\n      <Notification notif={notif}/>\n      <ShowBlogs \n      blogs={blogs}\n      username={user.username}\n      likeHandler={likeHandler}\n      removeHandler={removeHandler}\n      user = {user}\n      /> \n\n      <BlogForm \n      addBlog = {addBlog}\n      handleAuthorChange = {handleAuthorChange}\n      handleTitleChange = {handleTitleChange}\n      handleUrlChange = {handleUrlChange}\n      title = {title}\n      author = {author}\n      url = {url}\n      />\n\n    </div>\n  )\n}\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}