(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(40)},19:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),u=n.n(r),i=(n(19),n(2)),c=n(3),l=function(e){var t=e.submit,n=e.name,a=e.phone,r=e.nameChange,u=e.phoneChange;return o.a.createElement("form",{onSubmit:t},o.a.createElement("div",null,"nimi:",o.a.createElement("input",{value:n,onChange:r})),o.a.createElement("div",null,"puh:",o.a.createElement("input",{value:a,onChange:u})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"}," Lis\xe4\xe4 ")))},s=function(e){var t=e.submit,n=e.filter,a=e.filterChange;return o.a.createElement("form",{onSubmit:t},o.a.createElement("div",null,"search:",o.a.createElement("input",{value:n,onChange:a})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"rajaa")))},m=function(e){var t=e.persons,n=e.buttonHandler;return t.map(function(e){return o.a.createElement("li",{key:e.id},e.name," ",e.number," ",o.a.createElement("button",{onClick:n,value:e.id},"Poista")," ")})},f=function(e){var t=e.persons,n=e.filter,a=e.buttonHandler,r=t;return n&&(r=t.filter(function(e){return e.name.toLowerCase().includes(n.toLowerCase())}),console.log(r,n)),o.a.createElement(m,{persons:r,buttonHandler:a})},d=n(4),p=n.n(d),b="/api/persons",v=function(){return p.a.get(b).then(function(e){return e.data})},g=function(e){return p.a.post(b,e).then(function(e){return e.data})},h=function(e,t){return p.a.put("".concat(b,"/").concat(e),t).then(function(e){return e.data})},E=function(e){return p.a.delete("".concat(b,"/").concat(e)).then(function(e){return e.data})},j=(n(39),function(e){var t=e.notif,n=t.message,a=t.type;if(null===n)return null;var r={background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},u=null;return u="note"===a?Object(i.a)({},r,{color:"green"}):Object(i.a)({},r,{color:"red"}),o.a.createElement("div",{style:u},n)}),O=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],u=Object(a.useState)(""),m=Object(c.a)(u,2),d=m[0],p=m[1],b=Object(a.useState)(""),O=Object(c.a)(b,2),w=O[0],y=O[1],k=Object(a.useState)(""),C=Object(c.a)(k,2),S=C[0],H=C[1],x=Object(a.useState)(""),T=Object(c.a)(x,2),L=T[0],B=T[1],D=Object(a.useState)({message:null,type:null}),I=Object(c.a)(D,2),J=I[0],P=I[1];Object(a.useEffect)(function(){v().then(function(e){r(e)})},[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Puhelinluettelo"),o.a.createElement(j,{notif:J}),o.a.createElement(s,{submit:function(e){e.preventDefault(),H(L),B("")},filter:L,filterChange:function(e){B(e.target.value)}}),o.a.createElement("p",null,"----------------------------"),o.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),o.a.createElement(l,{submit:function(e){if(e.preventDefault(),n.findIndex(function(e){return e.name.toLowerCase===d})>-1){if(window.confirm("".concat(d," on jo luettelossa, korvataanko vanha numero uudella?"))){var t=n.find(function(e){return e.name===d}).id,a={name:d,number:w};h(t,a).then(function(e){var a={message:"Henkil\xf6n ".concat(e.name," numero korvattu uudella"),type:"note"};P(a),setTimeout(function(){P(Object(i.a)({},J,{message:null}))},5e3);var o=n.map(function(n){return n.id!==t?n:e});r(o)}).catch(function(e){var o={message:"Henkil\xf6 ".concat(a.name," on jo poistettu tietokannasta"),type:"error"};P(o),setTimeout(function(){P(Object(i.a)({},J,{message:null}))},5e3),r(n.filter(function(e){return e.id!==t}))})}}else{var o={name:d,number:w},u={message:"Henkil\xf6 ".concat(o.name," lis\xe4tty"),type:"note"};P(u),setTimeout(function(){return P(Object(i.a)({},J,{message:null}))},5e3),g(o).then(v().then(function(e){r(e)})).catch(function(e){P({message:"lis\xe4\xe4minen ep\xe4onnistui",type:"error"}),setTimeout(function(){P(Object(i.a)({},J,{message:null}))},5e3)}),p(""),y("")}},name:d,nameChange:function(e){p(e.target.value)},phone:w,phoneChange:function(e){y(e.target.value)}}),o.a.createElement("h2",null,"Numerot"),o.a.createElement(f,{persons:n,filter:S,buttonHandler:function(e){var t=e.target.value,a=n.find(function(e){return e.id==t});if(console.log(a),window.confirm("poistetaanko")){E(t).catch(function(e){P({message:"poistaminen ep\xe4onnistui, p\xe4ivit\xe4 sivu tai yrit\xe4 uudestaan",type:"error"}),setTimeout(function(){P(Object(i.a)({},J,{message:null}))},5e3)});var o=n.filter(function(e){return e.id!=t});r(o),P({message:"henkil\xf6  poistettu",type:"note"}),setTimeout(function(){P(Object(i.a)({},J,{message:null}))},5e3)}}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.761fb11c.chunk.js.map